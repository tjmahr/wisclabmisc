<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="wisclabmisc">
<title>Utterance length imputation and weighting • wisclabmisc</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Utterance length imputation and weighting">
<meta property="og:description" content="wisclabmisc">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">wisclabmisc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/utterance-length-imputation.html">Utterance length imputation and weighting</a>
    <a class="dropdown-item" href="../articles/gamlss-tools.html">Tools for GAMLSS models</a>
    <a class="dropdown-item" href="../articles/roc.html">Tools for ROC curves</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tjmahr/wisclabmisc/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Utterance length imputation and weighting</h1>
                        <h4 data-toc-skip class="author">Tristan
Mahr</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tjmahr/wisclabmisc/blob/HEAD/vignettes/articles/utterance-length-imputation.Rmd" class="external-link"><code>vignettes/articles/utterance-length-imputation.Rmd</code></a></small>
      <div class="d-none name"><code>utterance-length-imputation.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tjmahr/wisclabmisc" class="external-link">wisclabmisc</a></span><span class="op">)</span></span></code></pre></div>
<p>In this article, I describe the background of the
<code><a href="../reference/impute_values_by_length.html">impute_values_by_length()</a></code> function in our work and
demonstrate its use.</p>
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>In Hustad and colleagues (2020), we modeled intelligibility data in
young children’s speech. Children would hear an utterance and then would
repeat it. The utterances started at 2 words in length, then increased
to 3 words in length, and so on in batches of 10 sentences, all the way
to 7 words in length. There was a problem, however: Not all of the
children could produce utterances at every length. Specifically, if a
child could not reliably produced 5 utterances of a given length length,
the task was halted. So given the nature of the task, if a child had
produced 5-word utterances, they also produced 2–4-word utterances as
well.</p>
<p>Here, in our modeled/re-simulated version of the dataset, observe how
the number of children per utterance length decreases:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Attaching core tidyverse packages</span> ──────────────────────── tidyverse 2.0.0 ──</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">dplyr    </span> 1.1.2     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">readr    </span> 2.1.4</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">forcats  </span> 1.0.0     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">stringr  </span> 1.5.0</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">ggplot2  </span> 3.4.3     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tibble   </span> 3.2.1</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">lubridate</span> 1.9.2     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tidyr    </span> 1.3.0</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">purrr    </span> 1.0.2     </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Conflicts</span> ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">filter()</span> masks <span style="color: #0000BB;">stats</span>::filter()</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">lag()</span>    masks <span style="color: #0000BB;">stats</span>::lag()</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use the conflicted package (<span style="color: #0000BB; font-style: italic;">&lt;http://conflicted.r-lib.org/&gt;</span>) to force all conflicts to become errors</span></span>
<span></span>
<span><span class="va">data_example_intelligibility_by_length</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">tocs_level</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 2</span></span></span>
<span><span class="co">#&gt;   tocs_level     n</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>          1   165</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>          2   164</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>          3   162</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>          4   102</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>          5    47</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>          6    30</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span>          7    24</span></span></code></pre></div>
<p>The length of the utterance plausibly influenced the outcome
variable: Longer utterances have more words that might help a listener
understand the sentence, for example. Therefore, it did not seem
appropriate to ignore the missing values. We used the following two-step
procedure (see the <a href="https://doi.org/10.23641/asha.12330956.v1" class="external-link">Supplemental
Materials</a> for more detail):</p>
<ol style="list-style-type: decimal">
<li><p>impute the missing values at each utterance length using values
from shorter lengths, and do the imputation in stages, so that an
imputed value for length <em>L</em> can be used a predictor for
<em>L</em> + 1.</p></li>
<li><p>weight each utterance length by the probability of it being
produced for a child at a given age and take the weighted average of the
outcome variable across all length.</p></li>
</ol>
<p>Our goal for the data preparation was to produce a single number
intelligibility score, which this final weighted average provides such a
number. With this procedure, missing data is not ignored and implausible
data (like the longest utterances at the youngest ages) is
downweighted.</p>
</div>
<div class="section level2">
<h2 id="non-package-implementation">Non-package implementation<a class="anchor" aria-label="anchor" href="#non-package-implementation"></a>
</h2>
<p>Because I re-used this imputation procedure on two later projects, I
have refactored a couple of times, so below is the last version of the
procedure before I decided to clean it up and put in this R package.</p>
<p>The flow for the code consists of the following steps:</p>
<ul>
<li>reshape the data into a wide format,</li>
<li>train a series of linear models trained on the <em>observed</em>
data,</li>
<li>predict the responses for missing values</li>
<li>reshape back to a long format</li>
</ul>
<p>Here is the most recent version of the non-package version:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">impute_values</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">var</span>, <span class="va">data_train</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">spec</span> <span class="op">&lt;-</span> <span class="fu">build_wider_spec_for_imputation</span><span class="op">(</span><span class="va">data</span>, <span class="op">{</span><span class="op">{</span> <span class="va">var</span> <span class="op">}</span><span class="op">}</span><span class="op">)</span></span>
<span>  <span class="va">data_wide</span> <span class="op">&lt;-</span> <span class="fu">pivot_wider_for_imputation</span><span class="op">(</span><span class="va">data</span>, <span class="va">spec</span><span class="op">)</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">data_train</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">data_train</span> <span class="op">&lt;-</span> <span class="va">data</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="va">data_wide_train</span> <span class="op">&lt;-</span> <span class="fu">pivot_wider_for_imputation</span><span class="op">(</span><span class="va">data_train</span>, <span class="va">spec</span><span class="op">)</span></span>
<span>  <span class="va">models</span> <span class="op">&lt;-</span> <span class="fu">fit_imputation_models</span><span class="op">(</span><span class="va">data_wide_train</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">data_imputed</span> <span class="op">&lt;-</span> <span class="va">data_wide</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>      y_3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">y_3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">models</span><span class="op">$</span><span class="va">m_3</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pick.html" class="external-link">pick</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, <span class="va">y_3</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>      y_4 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">y_4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">models</span><span class="op">$</span><span class="va">m_4</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pick.html" class="external-link">pick</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, <span class="va">y_4</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>      y_5 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">y_5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">models</span><span class="op">$</span><span class="va">m_5</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pick.html" class="external-link">pick</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, <span class="va">y_5</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>      y_6 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">y_6</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">models</span><span class="op">$</span><span class="va">m_6</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pick.html" class="external-link">pick</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, <span class="va">y_6</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>      y_7 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">y_7</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">models</span><span class="op">$</span><span class="va">m_7</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pick.html" class="external-link">pick</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, <span class="va">y_7</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>  <span class="co"># handle these separately because `length_longest` could have been imputed if</span></span>
<span>  <span class="co"># there was a different strategy</span></span>
<span>  <span class="va">data_child_ll</span> <span class="op">&lt;-</span> <span class="va">data_wide</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">group</span>, <span class="va">subject_num</span>, <span class="va">visit_id</span>, <span class="va">age_months</span>, <span class="va">length_longest</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">data_original_values</span> <span class="op">&lt;-</span> <span class="va">data_wide</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer_spec.html" class="external-link">pivot_longer_spec</a></span><span class="op">(</span><span class="va">spec</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">group</span>, <span class="va">subject_num</span>, <span class="va">visit_id</span>, <span class="va">tocs_level</span>, <span class="op">{</span><span class="op">{</span> <span class="va">var</span> <span class="op">}</span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">d</span> <span class="op">&lt;-</span> <span class="va">data_imputed</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer_spec.html" class="external-link">pivot_longer_spec</a></span><span class="op">(</span><span class="va">spec</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span><span class="st">"imputed_{{ var }}"</span> <span class="op">:=</span> <span class="op">{</span><span class="op">{</span> <span class="va">var</span> <span class="op">}</span><span class="op">}</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">length_longest</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span></span>
<span>      <span class="va">data_child_ll</span>,</span>
<span>      by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"group"</span>, <span class="st">"subject_num"</span>, <span class="st">"visit_id"</span>, <span class="st">"age_months"</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span></span>
<span>      <span class="va">data_original_values</span>,</span>
<span>      by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"group"</span>, <span class="st">"subject_num"</span>, <span class="st">"visit_id"</span>, <span class="st">"tocs_level"</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>      imputed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="op">{</span><span class="op">{</span> <span class="va">var</span> <span class="op">}</span><span class="op">}</span><span class="op">)</span>, <span class="st">"imputed"</span>, <span class="st">"observed"</span><span class="op">)</span>,</span>
<span>      facet_lab <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">tocs_level</span>, <span class="st">" words"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span>  <span class="va">d</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">fit_imputation_models</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    m_7 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y_7</span> <span class="op">~</span> <span class="va">y_1</span> <span class="op">+</span> <span class="va">y_2</span> <span class="op">+</span> <span class="va">y_3</span> <span class="op">+</span> <span class="va">y_4</span> <span class="op">+</span> <span class="va">y_5</span> <span class="op">+</span> <span class="va">y_6</span>, <span class="va">data</span><span class="op">)</span>,</span>
<span>    m_6 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y_6</span> <span class="op">~</span> <span class="va">y_1</span> <span class="op">+</span> <span class="va">y_2</span> <span class="op">+</span> <span class="va">y_3</span> <span class="op">+</span> <span class="va">y_4</span> <span class="op">+</span> <span class="va">y_5</span> <span class="op">+</span> <span class="va">length_longest</span>, <span class="va">data</span><span class="op">)</span>,</span>
<span>    m_5 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y_5</span> <span class="op">~</span> <span class="va">y_1</span> <span class="op">+</span> <span class="va">y_2</span> <span class="op">+</span> <span class="va">y_3</span> <span class="op">+</span> <span class="va">y_4</span> <span class="op">+</span> <span class="va">length_longest</span>, <span class="va">data</span><span class="op">)</span>,</span>
<span>    m_4 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y_4</span> <span class="op">~</span> <span class="va">y_1</span> <span class="op">+</span> <span class="va">y_2</span> <span class="op">+</span> <span class="va">y_3</span> <span class="op">+</span> <span class="va">length_longest</span>, <span class="va">data</span><span class="op">)</span>,</span>
<span>    m_3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y_3</span> <span class="op">~</span> <span class="va">y_1</span> <span class="op">+</span> <span class="va">y_2</span> <span class="op">+</span> <span class="va">length_longest</span>, <span class="va">data</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">build_wider_spec_for_imputation</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">var</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider_spec.html" class="external-link">build_wider_spec</a></span><span class="op">(</span></span>
<span>    <span class="va">data</span>,</span>
<span>    names_from <span class="op">=</span> <span class="va">tocs_level</span>,</span>
<span>    names_prefix <span class="op">=</span> <span class="st">"y_"</span>,</span>
<span>    <span class="co"># {{ }}: plugs in variable name</span></span>
<span>    values_from <span class="op">=</span> <span class="op">{</span><span class="op">{</span> <span class="va">var</span> <span class="op">}</span><span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">pivot_wider_for_imputation</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">spec</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">data</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider_spec.html" class="external-link">pivot_wider_spec</a></span><span class="op">(</span></span>
<span>      <span class="va">spec</span>,</span>
<span>      id_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>        <span class="va">group</span>, <span class="va">subject_num</span>, <span class="va">visit_id</span>, <span class="va">length_longest</span>, <span class="va">age_months</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>This implementation is unsatisfactory for a number of reasons. It
hardcodes many unneeded variables, so to apply it to the example
dataset, I have to add filler values for those variables. It also
hardcodes the number of models and the predictors for the imputation
model. The <code>y_1</code> in the <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code> indicates that the
scores from the single-word trials are being used for the imputation.
This inclusion may or may not be appropriate. In speaking rate studies,
it doesn’t make sense to use include data from the single-word
trials.</p>
<p>But, these caveats aside, it works:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim1</span> <span class="op">&lt;-</span> <span class="va">data_example_intelligibility_by_length</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>group <span class="op">=</span> <span class="st">"fake"</span>, visit_id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">length_longest</span> <span class="op">!=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>subject_num <span class="op">=</span> <span class="va">child</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">impute_values</span><span class="op">(</span><span class="va">sim_intelligibility</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: There was 1 warning in `mutate()`.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> In argument: `y_7 = ifelse(is.na(y_7), predict(models$m_7,</span></span>
<span><span class="co">#&gt;   pick(everything())), y_7)`.</span></span>
<span><span class="co">#&gt; Caused by warning in `predict.lm()`:</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> prediction from rank-deficient fit; attr(*, "non-estim") has doubtful cases</span></span></code></pre></div>
<p>And here is how we can recreate Figure 3 from the supplemental
materials:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plotting_constants</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  pal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    imputed <span class="op">=</span> <span class="st">"#C7A76C"</span>, </span>
<span>    observed <span class="op">=</span> <span class="st">"#7DB0DD"</span>, </span>
<span>    <span class="st">"mean ± SE"</span> <span class="op">=</span> <span class="st">"grey30"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  guides_pal <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span></span>
<span>    shape <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>    color <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html" class="external-link">guide_legend</a></span><span class="op">(</span></span>
<span>      title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      override.aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        alpha <span class="op">=</span> <span class="fl">1</span>,</span>
<span>        shape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">16</span>, <span class="fl">17</span>, <span class="fl">16</span><span class="op">)</span>,</span>
<span>        linetype <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blank"</span>, <span class="st">"blank"</span>, <span class="st">"solid"</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> </span>
<span></span>
<span><span class="va">plotting_constants</span><span class="op">$</span><span class="va">scale_pal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span></span>
<span>  values <span class="op">=</span> <span class="va">plotting_constants</span><span class="op">$</span><span class="va">pal</span>, </span>
<span>  limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">plotting_constants</span><span class="op">$</span><span class="va">pal</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">sim1</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">tocs_level</span> <span class="op">!=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="va">length_longest</span>, </span>
<span>    y <span class="op">=</span> <span class="va">imputed_sim_intelligibility</span>, </span>
<span>    color <span class="op">=</span> <span class="va">imputed</span>, </span>
<span>    shape <span class="op">=</span> <span class="va">imputed</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html" class="external-link">geom_jitter</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">.3</span>, alpha <span class="op">=</span> <span class="fl">.5</span>, height <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html" class="external-link">stat_summary</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>group <span class="op">=</span> <span class="va">length_longest</span>, color <span class="op">=</span> <span class="st">"mean ± SE"</span><span class="op">)</span>, </span>
<span>    fun.data <span class="op">=</span> <span class="va">mean_se</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="va">plotting_constants</span><span class="op">$</span><span class="va">scale_pal</span> <span class="op">+</span> </span>
<span>  <span class="va">plotting_constants</span><span class="op">$</span><span class="va">guides_pal</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="st">"facet_lab"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span></span>
<span>    <span class="st">"Intelligibility"</span>, </span>
<span>    labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent_format</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Length of longest utterance (observed)"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span>, legend.justification <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="utterance-length-imputation_files/figure-html/unnamed-chunk-5-1.png" alt="Results of imputing multiword intelligibility using length-of-longest utterance and the average intelligibilities of shorter utterance lengths." width="900"><p class="caption">
Results of imputing multiword intelligibility using length-of-longest
utterance and the average intelligibilities of shorter utterance
lengths.
</p>
</div>
<p>In comparison, here is the package version of this procedure. We have
to specify all of the relevant variables ahead of time, but the number
of models or the variables involved are no longer hard-coded.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim2</span> <span class="op">&lt;-</span> <span class="va">data_example_intelligibility_by_length</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">length_longest</span> <span class="op">!=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/impute_values_by_length.html">impute_values_by_length</a></span><span class="op">(</span></span>
<span>    var_y <span class="op">=</span> <span class="va">sim_intelligibility</span>,</span>
<span>    var_length <span class="op">=</span> <span class="va">tocs_level</span>,</span>
<span>    id_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">child</span>, <span class="va">age_months</span>, <span class="va">length_longest</span><span class="op">)</span>, </span>
<span>    include_max_length <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Warning in predict.lm(models[[y_name]], data_imputed): prediction from</span></span>
<span><span class="co">#&gt; rank-deficient fit; attr(*, "non-estim") has doubtful cases</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span></span>
<span>  <span class="va">sim1</span><span class="op">$</span><span class="va">imputed_sim_intelligibility</span>, </span>
<span>  <span class="va">sim2</span><span class="op">$</span><span class="va">sim_intelligibility_imputed</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">sim2</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">tocs_level</span> <span class="op">!=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="va">length_longest</span>, </span>
<span>    y <span class="op">=</span> <span class="va">sim_intelligibility_imputed</span>, </span>
<span>    color <span class="op">=</span> <span class="va">sim_intelligibility_imputation</span>, </span>
<span>    shape <span class="op">=</span> <span class="va">sim_intelligibility_imputation</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html" class="external-link">geom_jitter</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">.3</span>, alpha <span class="op">=</span> <span class="fl">.5</span>, height <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html" class="external-link">stat_summary</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>group <span class="op">=</span> <span class="va">length_longest</span>, color <span class="op">=</span> <span class="st">"mean ± SE"</span><span class="op">)</span>, </span>
<span>    fun.data <span class="op">=</span> <span class="va">mean_se</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="va">plotting_constants</span><span class="op">$</span><span class="va">scale_pal</span> <span class="op">+</span> </span>
<span>  <span class="va">plotting_constants</span><span class="op">$</span><span class="va">guides_pal</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="st">"tocs_level"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span></span>
<span>    <span class="st">"Intelligibility"</span>, </span>
<span>    labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent_format</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Length of longest utterance (observed)"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span>, legend.justification <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span></span>
<span><span class="va">p2</span></span></code></pre></div>
<p><img src="utterance-length-imputation_files/figure-html/unnamed-chunk-6-1.png" width="900"></p>
<p>In the original models, the length of the longest utterance is used
as a continuous predictor in the imputations. In the package version
this behavior is optional and off by default. It shouldn’t matter
much.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim3</span> <span class="op">&lt;-</span> <span class="va">data_example_intelligibility_by_length</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">length_longest</span> <span class="op">!=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/impute_values_by_length.html">impute_values_by_length</a></span><span class="op">(</span></span>
<span>    var_y <span class="op">=</span> <span class="va">sim_intelligibility</span>,</span>
<span>    var_length <span class="op">=</span> <span class="va">tocs_level</span>,</span>
<span>    id_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">child</span>, <span class="va">age_months</span>, <span class="va">length_longest</span><span class="op">)</span>, </span>
<span>    <span class="co"># changed line</span></span>
<span>    include_max_length <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Warning in predict.lm(models[[y_name]], data_imputed): prediction from</span></span>
<span><span class="co">#&gt; rank-deficient fit; attr(*, "non-estim") has doubtful cases</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span></span>
<span>  <span class="va">sim2</span><span class="op">$</span><span class="va">sim_intelligibility_imputed</span>, </span>
<span>  <span class="va">sim3</span><span class="op">$</span><span class="va">sim_intelligibility_imputed</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Mean relative difference: 8.473438e-05"</span></span>
<span></span>
<span><span class="va">p2</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">sim3</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">tocs_level</span> <span class="op">!=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="utterance-length-imputation_files/figure-html/unnamed-chunk-7-1.png" width="900"></p>
</div>
<div class="section level2">
<h2 id="utterance-weighting">Utterance weighting<a class="anchor" aria-label="anchor" href="#utterance-weighting"></a>
</h2>
<p>TD</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Hustad, K. C., Mahr, T., Natzke, P. E. M., &amp; Rathouz, P. J.
(2020). Development of Speech Intelligibility Between 30 and 47 Months
in Typically Developing Children: A Cross-Sectional Study of Growth.
<em>Journal of Speech, Language, and Hearing Research</em>,
<em>63</em>(6), 1675–1687. <a href="https://doi.org/10.1044/2020_JSLHR-20-00008" class="external-link uri">https://doi.org/10.1044/2020_JSLHR-20-00008</a></p>
<p>Hustad, K. C., Mahr, T., Natzke, P. E. M., &amp; J. Rathouz, P.
(2020). Supplemental Material S1 (Hustad et al., 2020). ASHA journals.
<a href="https://doi.org/10.23641/asha.12330956.v1" class="external-link uri">https://doi.org/10.23641/asha.12330956.v1</a></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Tristan Mahr.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
