<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Weight utterance lengths by using an ordinal regression model — weight_lengths_with_ordinal_model • wisclabmisc</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Weight utterance lengths by using an ordinal regression model — weight_lengths_with_ordinal_model"><meta name="description" content="For each participant, we find their length of longest utterance. We predict
this longest utterance length as a nonlinear function of some variable, and
we compute the probability of reaching each utterance length at each value of
the predictor variable. These probabilities are then normalized to provide
weights for each utterance length."><meta property="og:description" content="For each participant, we find their length of longest utterance. We predict
this longest utterance length as a nonlinear function of some variable, and
we compute the probability of reaching each utterance length at each value of
the predictor variable. These probabilities are then normalized to provide
weights for each utterance length."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">wisclabmisc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/gamlss-tools.html">Tools for GAMLSS models</a></li>
    <li><a class="dropdown-item" href="../articles/roc.html">Tools for ROC curves</a></li>
    <li><a class="dropdown-item" href="../articles/utterance-length-imputation.html">Utterance length imputation and weighting</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tjmahr/wisclabmisc/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Weight utterance lengths by using an ordinal regression model</h1>
      <small class="dont-index">Source: <a href="https://github.com/tjmahr/wisclabmisc/blob/main/R/impute-staged.R" class="external-link"><code>R/impute-staged.R</code></a></small>
      <div class="d-none name"><code>weight_lengths_with_ordinal_model.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>For each participant, we find their length of longest utterance. We predict
this longest utterance length as a nonlinear function of some variable, and
we compute the probability of reaching each utterance length at each value of
the predictor variable. These probabilities are then normalized to provide
weights for each utterance length.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">weight_lengths_with_ordinal_model</span><span class="op">(</span></span>
<span>  <span class="va">data_train</span>,</span>
<span>  <span class="va">var_length</span>,</span>
<span>  <span class="va">var_x</span>,</span>
<span>  <span class="va">id_cols</span>,</span>
<span>  spline_df <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  data_join <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data-train">data_train<a class="anchor" aria-label="anchor" href="#arg-data-train"></a></dt>
<dd><p>dataframe used to train the ordinal model. <code>data_train</code>
can also be a function. In this case, it is applied to the <code>data_join</code>
argument in order to derive (filter) a subset of the data for training.</p></dd>


<dt id="arg-var-length">var_length<a class="anchor" aria-label="anchor" href="#arg-var-length"></a></dt>
<dd><p>bare name of the length variable. For example,
<code>tocs_level</code>.</p></dd>


<dt id="arg-var-x">var_x<a class="anchor" aria-label="anchor" href="#arg-var-x"></a></dt>
<dd><p>bare name of the predictor variable. For example, <code>age_months</code>.</p></dd>


<dt id="arg-id-cols">id_cols<a class="anchor" aria-label="anchor" href="#arg-id-cols"></a></dt>
<dd><p>a selection of variable names that uniquely identify each
group of related observations. For example, <code>c(child_id, age_months)</code>.</p></dd>


<dt id="arg-spline-df">spline_df<a class="anchor" aria-label="anchor" href="#arg-spline-df"></a></dt>
<dd><p>number of degrees of freedom to use for the ordinal
regression model.</p></dd>


<dt id="arg-data-join">data_join<a class="anchor" aria-label="anchor" href="#arg-data-join"></a></dt>
<dd><p>(optional) dataset to use join the weights onto. This
feature is necessary because we want to train a dataset on the observed
data but supply the weights to the dataset with missing values imputed.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>the probability and weights of each utterance length at each observed
value of <code>var_x</code>. These are in the added columns
<code>{var_length}_prob_reached</code> and <code>{var_length}_weight</code>, respectively.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Hustad, K. C., Mahr, T., Natzke, P. E. M., &amp; Rathouz, P. J.
(2020). Development of Speech Intelligibility Between 30 and 47 Months in
Typically Developing Children: A Cross-Sectional Study of Growth. <em>Journal
of Speech, Language, and Hearing Research</em>, <em>63</em>(6), 1675–1687.
https://doi.org/10.1044/2020_JSLHR-20-00008</p>
<p>Hustad, K. C., Mahr, T., Natzke, P. E. M., &amp; J. Rathouz, P. (2020).
Supplemental Material S1 (Hustad et al., 2020). ASHA journals.
https://doi.org/10.23641/asha.12330956.v1</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">data_weights</span> <span class="op">&lt;-</span> <span class="fu">weight_lengths_with_ordinal_model</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">data_example_intelligibility_by_length</span>,</span></span>
<span class="r-in"><span>  <span class="va">tocs_level</span>,</span></span>
<span class="r-in"><span>  <span class="va">age_months</span>,</span></span>
<span class="r-in"><span>  <span class="va">child</span>,</span></span>
<span class="r-in"><span>  spline_df <span class="op">=</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">data_weights</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age_months</span>, y <span class="op">=</span> <span class="va">tocs_level_prob_reached</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">ordered</a></span><span class="op">(</span><span class="va">tocs_level</span><span class="op">)</span><span class="op">)</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_color_ordinal</a></span><span class="op">(</span>end <span class="op">=</span> <span class="fl">.85</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Prob. of reaching length"</span>, color <span class="op">=</span> <span class="st">"Utterance length"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">p2</span> <span class="op">&lt;-</span> <span class="va">p1</span> <span class="op">+</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">tocs_level_weight</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Weight of utterance length"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="weight_lengths_with_ordinal_model-1.png" alt="" width="1094" height="676"></span>
<span class="r-plt img"><img src="weight_lengths_with_ordinal_model-2.png" alt="" width="1094" height="676"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tristan Mahr.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

