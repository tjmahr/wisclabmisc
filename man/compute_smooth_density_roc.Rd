% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/roc.R
\name{compute_smooth_density_roc}
\alias{compute_smooth_density_roc}
\title{Create an ROC curve from smoothed densities}
\usage{
compute_smooth_density_roc(
  data,
  controls,
  cases,
  along = NULL,
  best_weights = c(1, 0.5),
  direction = "auto",
  ...
)
}
\arguments{
\item{data}{a dataframe containing densities}

\item{controls, cases}{bare column name for the densities of the control group}

\item{along}{optional bare column name for the response values}

\item{best_weights}{weights for computing the best ROC curve points. Defaults
to \code{c(1, .5)}, which are the defaults used by \code{pROC::coords()}.}

\item{direction}{\code{direction} to set for the for \code{pROC::roc()}. Defaults to
\code{"auto"}.}

\item{...}{additional arguments. Not used currently.}
}
\value{
the dataframe is updated with new columns for the \code{.sensitivities},
\code{.specificities}, \code{.auc}, \code{.roc_row}, \code{.is_best_youden} and
\code{.is_best_closest_topleft}.
}
\description{
Create an ROC curve from smoothed densities
}
\examples{
set.seed(100)
x1 <- rnorm(100, 4, 1)
x2 <- rnorm(100, 2, .5)
both <- c(x1, x2)
steps <- seq(min(both), max(both), length.out = 200)
d1 <- dnorm(steps, mean(x1), sd(x1))
d2 <- dnorm(steps, mean(x2), sd(x2))
data <- tibble::tibble(
  y = steps,
  d1 = d1,
  d2 = d2,
  outcome = rbinom(200, 1, prob = 1 - (d1 / (d1 + d2))),
  group = ifelse(outcome, "case", "control")
)
compute_smooth_density_roc(data, d1, d2)
compute_smooth_density_roc(data, d1, d2, along = y)

# terrible ROC because the response is not present (just the densities)
data_shuffled <- data[sample(seq_len(nrow(data))), ]
compute_smooth_density_roc(data_shuffled, d1, d2)

# sorted along response first: correct AUC
compute_smooth_density_roc(data_shuffled, d1, d2, along = y)
}
\concept{roc}
